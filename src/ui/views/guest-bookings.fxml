<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.image.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="ui.controllers.GuestBookingsController" styleClass="root"
    stylesheets="@../../resources/css/style.css">

    <!-- Top Bar -->
    <top>
        <HBox styleClass="header-bar-secondary" spacing="20" alignment="CENTER_LEFT">
            <ImageView fitWidth="150" fitHeight="50" preserveRatio="true">
                <image>
                    <Image url="/resources/images/sarayebanner.png"/>
                </image>
            </ImageView>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="â† Back to Dashboard"
                    onAction="#handleBack"
                    styleClass="back-button"/>
            <Button text="Refresh"
                    onAction="#handleRefresh"
                    styleClass="back-button"/>
        </HBox>
    </top>

    <!-- Center Section - Bookings Table -->
    <center>
        <VBox spacing="20" style="-fx-padding: 30;">

            <!-- Page Title -->
            <VBox spacing="10">
                <Label text="ðŸ“… My Bookings" styleClass="page-title"/>
                <Label text="View and manage your property bookings" styleClass="subtitle"/>
            </VBox>

            <!-- Bookings Content -->
            <VBox spacing="15" styleClass="content-card">

                <!-- Booking Count Label -->
                <HBox alignment="CENTER_LEFT">
                    <Label fx:id="bookingCountLabel" text="Loading bookings..." styleClass="label-bold">
                        <font>
                            <Font size="14" />
                        </font>
                    </Label>
                </HBox>

            <!-- Bookings Table -->
            <TableView fx:id="bookingsTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                <columns>
                    <TableColumn fx:id="bookingIdColumn" text="Booking ID" prefWidth="100" />
                    <TableColumn fx:id="propertyTitleColumn" text="Property" prefWidth="180" />
                    <TableColumn fx:id="checkInColumn" text="Check-In" prefWidth="100" />
                    <TableColumn fx:id="checkOutColumn" text="Check-Out" prefWidth="100" />
                    <TableColumn fx:id="totalPriceColumn" text="Total (PKR)" prefWidth="100" />
                    <TableColumn fx:id="statusColumn" text="Status" prefWidth="100" />
                    <TableColumn fx:id="actionColumn" text="Action" prefWidth="100" />
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>
            </TableView>

            <!-- Info Box -->
            <VBox spacing="10" styleClass="info-box">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15" />
                </padding>

                <Label text="â„¹ï¸ Booking Status Information" styleClass="info-title">
                    <font>
                        <Font name="System Bold" size="14" />
                    </font>
                </Label>

                <VBox spacing="5">
                    <Label text="â€¢ PENDING - Waiting for host approval" styleClass="info-text">
                        <font>
                            <Font size="12"/>
                        </font>
                    </Label>
                    <Label text="â€¢ APPROVED - Confirmed by host" styleClass="info-text">
                        <font>
                            <Font size="12"/>
                        </font>
                    </Label>
                    <Label text="â€¢ CANCELLED - Cancelled by you" styleClass="info-text">
                        <font>
                            <Font size="12"/>
                        </font>
                    </Label>
                    <Label text="â€¢ DECLINED - Declined by host" styleClass="info-text">
                        <font>
                            <Font size="12"/>
                        </font>
                    </Label>
                </VBox>


                <Label text="ðŸ’¡ You can only cancel PENDING or APPROVED bookings." styleClass="info-text"
                    wrapText="true">
                    <font>
                        <Font size="12" />
                    </font>
                </Label>
            </VBox>
            </VBox>
        </VBox>
    </center>
</BorderPane>
